\documentclass[parskip=full,11pt]{scrartcl}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[german]{babel}
\usepackage[useregional]{datetime2}
\usepackage[pdfborderstyle={/S/U/W 0}]{hyperref}
\usepackage[nameinlink]{cleveref}
\usepackage[section]{placeins}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{csquotes}
\usepackage{amsmath} % for $\text{}$
\usepackage{entwurf}
\usepackage{enumitem}
\setlist{nosep}

\newcommand\urlpart[2]{$\underbrace{\text{\texttt{#1}}}{\text{#2}}$}
\raggedbottom
\crefname{figure}{Abb}{Abb}

\newcommand\producttitle{treff.}
\hypersetup{
	pdftitle={Entwurf: \producttitle},
	bookmarks=true,
}

% section numbers in margins:
\renewcommand\sectionlinesformat[4]{\makebox[0pt][r]{#3}#4}

% header & footer
\usepackage{scrlayer-scrpage}
%\lofoot{\today}
%\refoot{\today}
\pagestyle{scrheadings}

\title{\includegraphics[width = 80mm]{images/logo_crop.png}}
\subtitle{\huge Entwurf}
\author{Lukas Dippon
        \and Jens Kienle
        \and Matthias Noll
        \and Fabian Röpke
        \and Tim Schmidt
        \and Simon Vögele}

\begin{document}

\maketitle
\thispagestyle{empty} % removed page number from title

\pagebreak
\tableofcontents

%%%%%%%%%%%%%%%%%%%
\pagebreak
\section{Einleitung}

\subsection{Client-Server}
% auf client-server architektur eingehen
% (Fließtext [kleiner Einleitungstext] und ggf kleines UML-Klassendiagram)

\subsection{Funktion und externes Verhalten - Client}
% Funktion und Verhalten des Clients (Fließtext und UML-Diagramme)

\subsection{Funktion und externes Verhalten - Server}
% Funktion und Verhalten des Servers (Fließtext und UML-Diagramme)

%%%%%%%%%%%%%%%%%%%%
\pagebreak
\section{Aufbau und internes Verhalten - Client}

\subsection{Aufbau}
% Aufteilung in GUI und Datenverarbeitung (Fließtext)
% Ihre Funktionen

\subsection{Bestandteile der GUI}
% Strukturierung der GUI durch Activities und deren Aufteilung in Fragments,
%	sowie das Zusammenspiel der Activities (Fließtext und UML-Klassendiagramme,
% ggf Sequenzdiagramme)

\subsection{Bestandteile Datenverarbeitung}
% Aufteilung der Funktionalitäten auf seperate Klassen,
% sowie deren Zusammenspiel (Fließtext und UML-Klassendiagramme, ggf Sequenzdiagramme)

\subsection{Kommunikation von GUI und Datenverarbeitung}
% Zusammenspiel von GUI und Datenverarbeitung
% (Fließtext und UML-Klassendiagramme, ggf Sequenzdiagramme)

\subsection{JavaDoc}

%%%%%%%%%%%%%%%%%%%%%%
\pagebreak
\section{Aufbau und internes Verhalten - Server}

\subsection{Aufbau}
% Aufteilung der Funktionalitäten auf seperate Klassen;
% Zusammenspiel dieser Klassen (Fließtext und UML-Klassendiagramme,
% ggf Sequenzdiagramme)

\subsection{Bestandteile des Servers}
% Aufbau und genaue Funktionalität dieser Klassen
% [z.B. Datenbank, Schnittstelle zum Client]
% (Fließtext und UML-Klassendiagramme, ggf Sequenzdiagramme)

\subsection{JavaDoc}

%%%%%%%%%%%%%%%%%%%%%%
\pagebreak
\section{Kommunikation zwischen Client und Server}
% Zusammenspiel von Client und Server
% (Fließtext und Sequenzdiagram, ggf UML-Klassendiagram)
% TODO: JSON verlinken / footnote
Client und Server kommunizieren mittels des JSON-Dateiformates.
Die oberste Ebene jeder Nachricht bildet ein einzelnes JSON-Objekt.
Parameter, Rückgabewerte und Fehlercodes werden als Eigenschaft dieses Objektes
kodiert.
Eine Anfrage eines Klienten an den Server beinhaltet immer mindestens eine
Eigenschaft mit dem Schlüssel \textbf{cmd}.
Die Namen der im folgenden definierten Befehle sind exakt die Werte, die bei
Kodierung als Nachricht den Wert der \textbf{cmd}-Eigenschaft bilden müssen.
Diese Namen sind als simple Zeichenketten zu kodieren.

\subsection{Befehle}
\newcommand{\apiToken}{
    \apiArgument{token}{Authentifizierungtoken, welches beim Einloggen in das
    Benutzerkonto vom Server zurückgegeben wurde}
}
\newcommand{\apiTokenInvalid}{
    \apiErrorCode{010}{Authentifizierungtoken ungültig}
}
\apiCommand{login}
{Einloggen in ein Nutzerkonto}
{\apiArgument{user}{Benutzername des Kontos}
\apiArgument{pass}{Passwort des Kontos}}
{\apiArgument{token}{Authentifizierungstoken, welches in weiteren Befehlen
als Eingabe verlangt wird}}
{\apiErrorCode{100}{Nutzername/Passwort-Kombination ungültig}}

\apiCommand{list-groups}
{Auflisten der Gruppen, in denen das Benutzerkonto Mitglied ist}
{\apiToken}
{\apiArgument{groups}{Ein Array an oberflächlich beschriebenen Gruppen (siehe
Kapitel \ref{sec:groupdesc})}}
{\apiTokenInvalid}

\apiCommand{get-group-details}
{Auflisten der Gruppen, in denen das Benutzerkonto Mitglied ist}
{\apiToken
\apiArgument{id}{Identifikationsnummer der Gruppe}}
{Eine ausführliche Beschreibung der Gruppe, die zu der angegebenen
Identifikationsnummer gehört (siehe \ref{sec:groupdesc})}
{\apiTokenInvalid
\apiErrorCode{300}{Gruppen-Identifikationsnummer ungültig}}

\subsection{Gruppenbeschreibung}\label{sec:groupdesc}
Gruppen können in zwei verschiedenen Weisen beschrieben werden:
oberflächlich oder umfangreich.

\subsubsection{Oberflächlich}
\apiArgument{id}{Eindeutige Identifikationsnummer der Gruppe, mit der diese
in weiteren Befehlen referenziert werden kann}
\apiArgument{name}{Name der Gruppe}
\apiArgument{icon-hash}{Hashwert des Gruppenportraits}

\subsubsection{Umfangreich}
\apiArgument{members}{Array von Benutzerkonten, die Teil der Gruppe sind
(siehe \ref{sec:accountdesc})}
\apiArgument{events}{Array von Verabredungen, die in der Gruppe erstellt worden
sind (siehe \ref{sec:eventdesc})}
\apiArgument{polls}{Array von Abstimmungen, die in der Gruppe erstellt worden
sind (siehe \ref{sec:polldesc})}

\subsection{Benutzerkontobeschreibung}\label{sec:accountdesc}
\apiArgument{user}{Benutzername des Kontos}
\apiArgument{icon-hash}{Hashwert des Benutzerkontoportraits}

\subsection{Verabredungsbeschreibung}\label{sec:eventdesc}
\apiArgument{placeholder}{placeholder}

\subsection{Abstimmugsbeschreibung}\label{sec:polldesc}
\apiArgument{placeholder}{placeholder}

\end{document}
