\ProvidesPackage{entwurf}
\RequirePackage{xcolor}
\RequirePackage{expl3}
\RequirePackage{rdfref-user,rdfref-query}
\RequirePackage{caption}
\RequirePackage{tikz}
\RequirePackage{calc}
\RequirePackage[framemethod=tikz]{mdframed}
\RequirePackage{etoolbox}

\parindent 0pt

%\ExplSyntaxOn

\newcounter{apiCommand}
\newtoggle{apiCmdBG}
\toggletrue{apiCmdBG}
\newcommand{\apiCmdClr}{gray!20}

% Defines a new API-command
% Params:
%   1: op-value
%   2: Description
%   3: Arguments
%   4: Return values
%   5: Errorcodes
\newcommand{\apiCommand}[5]{
    \iftoggle{apiCmdBG}{%
        \renewcommand{\apiCmdClr}{gray!20}
    }{%
        \renewcommand{\apiCmdClr}{white}
    }
    \begin{mdframed}[hidealllines=true,backgroundcolor=\apiCmdClr]%
    \vspace{8pt}
    \stepcounter{apiCommand}
    Befehl~\arabic{apiCommand}:~\textbf{#1}
    \\#2
    \par Parameter:
    \\\apiArgument{#3}
    \par RÃ¼ckgabewerte:
    \\\apiArgument{#4}
    \par Fehlercodes:
    \\\apiErrorCode{#5}
    \end{mdframed}
    \iftoggle{apiCmdBG}{%
        \togglefalse{apiCmdBG}
    }{%
        \toggletrue{apiCmdBG}
    }
}

% Defines an argument for an API-command
% Params:
%   1: op-value and description,
%      seperated by forward slash (/)
\newcommand{\apiArgument}[2]{
    \apiTableEntry{#1}{0.2}{0.75}
}

% Defines an error code for an API-command
% Params:
%   1: numerical error code and description,
%      seperated by forward slash (/)
\newcommand{\apiErrorCode}[1]{
    \apiTableEntry{#1}{0.2}{0.75}
}

% Creates a table entry for use in API definitions
% Params:
%   1: values for both cells in row,
%      seperated by forward slash (/)
%   2: Width of first column
%   3: Width of second column
\newcommand{\apiTableEntry}[3]{
    \foreach \code/\desc in {#1} {
        \begin{tabular}[t]{ p{#2\textwidth} p{#3\textwidth} }
            \textbf{\code} & \desc
        \end{tabular}\\
    }
    \vspace{4pt}
}

%\ExplSyntaxOff
